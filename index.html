<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>BahtCalc</title>
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#0056b3">
    
    <link rel="icon" type="image/png" href="https://cdn-icons-png.flaticon.com/512/197/197452.png">
    <link rel="apple-touch-icon" href="https://cdn-icons-png.flaticon.com/512/197/197452.png">
    
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; background: #f0f2f5; display: flex; flex-direction: column; align-items: center; min-height: 100vh; margin: 0; padding: 20px; box-sizing: border-box; }
        .card { background: white; padding: 30px 25px; border-radius: 24px; box-shadow: 0 8px 30px rgba(0,0,0,0.08); width: 100%; max-width: 380px; text-align: center; margin-bottom: auto; }
        
        h1 { margin: 0 0 5px; color: #222; font-size: 26px; letter-spacing: -0.5px; }
        .subtitle { color: #888; font-size: 13px; margin-bottom: 25px; display: block; font-weight: 500;}

        /* INPUT PRINCIPAL */
        .input-group { margin-bottom: 25px; text-align: left; }
        label { display: block; font-size: 13px; color: #666; margin-bottom: 8px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px; }
        
        input[type="text"], input[type="number"] { 
            width: 100%; padding: 16px; 
            font-size: 34px; /* Tama√±o grande */
            border: 2px solid #eee; border-radius: 16px; 
            box-sizing: border-box; outline: none; transition: all 0.2s; 
            font-weight: 800; color: #333; text-align: center;
        }
        input:focus { border-color: #0056b3; background: #f8fbff; }

        /* RESULTADOS (Ahora uno debajo del otro para que quepan los n√∫meros grandes) */
        .results { display: flex; flex-direction: column; gap: 15px; margin-bottom: 25px; }
        
        .result-box { 
            background: #f8f9fa; padding: 15px 20px; 
            border-radius: 16px; border: 1px solid #eef0f2; 
            display: flex; justify-content: space-between; align-items: center;
        }
        
        /* Etiquetas alineadas a la izquierda */
        .result-box small { 
            color: #888; font-size: 14px; text-transform: uppercase; font-weight: 700; 
            min-width: 50px; text-align: left;
        }
        
        /* N√∫meros alineados a la derecha y MUY GRANDES */
        .result-box strong { 
            font-size: 34px; font-weight: 800; text-align: right; white-space: nowrap;
        }
        
        .blue { color: #0056b3 !important; }
        .green { color: #28a745 !important; }

        /* BOTONES */
        .btn-row { display: flex; justify-content: center; gap: 20px; margin-top: 10px; }
        .action-link { color: #0056b3; text-decoration: none; font-size: 14px; font-weight: 600; cursor: pointer; background: none; border: none; padding: 0;}
        
        /* CONFIGURACI√ìN */
        #settings { display: none; margin-top: 25px; padding-top: 20px; border-top: 1px dashed #ddd; text-align: left; }
        .setting-row { margin-bottom: 15px; }
        .setting-row input { font-size: 20px; padding: 12px; height: auto; text-align: left; font-weight: normal;}
        .btn-save { width: 100%; background: #0056b3; color: white; border: none; padding: 14px; border-radius: 12px; font-size: 16px; font-weight: 600; cursor: pointer; box-shadow: 0 4px 12px rgba(0,86,179,0.2); }

        /* FOOTER */
        footer { margin-top: 30px; text-align: center; color: #999; width: 100%; max-width: 380px; }
        .dev-legend { font-size: 12px; margin-bottom: 15px; }
        .social-links { display: flex; justify-content: center; gap: 15px; margin-bottom: 10px; }
        .social-btn { display: flex; align-items: center; justify-content: center; width: 40px; height: 40px; background: white; border-radius: 50%; box-shadow: 0 2px 8px rgba(0,0,0,0.05); color: #333; text-decoration: none; transition: transform 0.2s; font-size: 18px;}
        .contact-btn { background: #0056b3; color: white; padding: 8px 20px; border-radius: 20px; text-decoration: none; font-size: 12px; font-weight: bold; display: inline-block; box-shadow: 0 4px 10px rgba(0,86,179,0.2); }
    </style>
</head>
<body>
    <div class="card">
        <h1>üáπüá≠ BahtCalc</h1>
        <span class="subtitle">Calculadora de Cambio Baht - Tailandia</span>
        
        <div class="input-group">
            <label>Monto en THB</label>
            <input type="text" id="thbInput" placeholder="0" inputmode="decimal" autocomplete="off" autofocus>
        </div>

        <div class="results">
            <div class="result-box">
                <small>üá∫üá∏ USD</small>
                <strong id="usdResult" class="green">$0.00</strong>
            </div>
            <div class="result-box">
                <small>üá¶üá∑ ARS</small>
                <strong id="arsResult" class="blue">$0</strong>
            </div>
        </div>

        <div class="btn-row">
            <button class="action-link" onclick="toggleSettings()">‚öôÔ∏è Ajustar Cambio</button>
            <button class="action-link" onclick="shareApp()">üîó Compartir</button>
        </div>

        <div id="settings">
            <div class="setting-row">
                <label>1 USD = ? ARS (Blue/Tarjeta)</label>
                <input type="text" id="rateArs" inputmode="decimal" placeholder="Ej: 1200">
            </div>
            <div class="setting-row">
                <label>1 USD = ? THB (Casa de Cambio)</label>
                <input type="text" id="rateThb" inputmode="decimal" placeholder="Ej: 34">
            </div>
            <button class="btn-save" onclick="saveSettings()">Guardar Preferencias</button>
        </div>
    </div>

    <footer>
        <div class="social-links">
            <a href="https://x.com/BahtCalc" target="_blank" class="social-btn" aria-label="X (Twitter)">ùïè</a>
            <a href="https://instagram.com/BahtCalc" target="_blank" class="social-btn" aria-label="Instagram">üì∑</a>
        </div>
        <a href="mailto:BahtCalc@daslatam.org" class="contact-btn">Cont√°ctanos</a>
        <p class="dev-legend">
            Desarrollado por <strong>BahtCalc@daslatam.org</strong><br>
            ¬© 2024 BahtCalc App
        </p>
    </footer>

    <script>
        // CONFIGURACI√ìN INICIAL
        let rateArs = localStorage.getItem('rateArs') || 1200; 
        let rateThb = localStorage.getItem('rateThb') || 34;

        document.getElementById('rateArs').value = rateArs;
        document.getElementById('rateThb').value = rateThb;

        const thbInput = document.getElementById('thbInput');
        const usdResult = document.getElementById('usdResult');
        const arsResult = document.getElementById('arsResult');

        // PARSEO DE N√öMEROS (Manejo de comas y puntos)
        function parseLocalFloat(val) {
            if (!val) return 0;
            // Reemplazar comas por puntos y eliminar cualquier cosa que no sea n√∫mero
            let cleanVal = val.toString().replace(/,/g, '.').replace(/[^\d.]/g, '');
            return parseFloat(cleanVal) || 0;
        }

        // C√ÅLCULO
        function calculate() {
            const thb = parseLocalFloat(thbInput.value);
            const rThb = parseLocalFloat(document.getElementById('rateThb').value);
            const rArs = parseLocalFloat(document.getElementById('rateArs').value);

            if(rThb === 0) return; // Evitar error div/0

            const usd = thb / rThb;
            const ars = usd * rArs;

            usdResult.textContent = `$${usd.toFixed(2)}`;
            arsResult.textContent = `$${Math.round(ars).toLocaleString('es-AR')}`;
        }

        thbInput.addEventListener('input', calculate);

        // CONFIGURACI√ìN UI
        function toggleSettings() {
            const settings = document.getElementById('settings');
            settings.style.display = settings.style.display === 'block' ? 'none' : 'block';
        }

        function saveSettings() {
            const valArs = document.getElementById('rateArs').value;
            const valThb = document.getElementById('rateThb').value;
            localStorage.setItem('rateArs', valArs);
            localStorage.setItem('rateThb', valThb);
            calculate();
            toggleSettings();
        }

        // COMPARTIR
        function shareApp() {
            if (navigator.share) {
                navigator.share({ title: 'BahtCalc', url: 'https://BahtCalc.vercel.app' }).catch(console.error);
            } else {
                navigator.clipboard.writeText('https://BahtCalc.vercel.app');
                alert('¬°Link copiado!');
            }
        }

        // SERVICE WORKER
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('sw.js');
        }
    </script>
</body>
</html>